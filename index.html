<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Excitement Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Orbitron', monospace;
            overflow-x: hidden;
        }

        .field-background {
            background: linear-gradient(135deg, 
                #2d5a3d 0%, 
                #3d7051 25%, 
                #4a8660 50%, 
                #3d7051 75%, 
                #2d5a3d 100%);
            position: relative;
            min-height: 100vh;
        }

        .field-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(90deg, transparent, transparent 48px, rgba(255,255,255,0.1) 48px, rgba(255,255,255,0.1) 50px),
                repeating-linear-gradient(0deg, transparent, transparent 48px, rgba(255,255,255,0.1) 48px, rgba(255,255,255,0.1) 50px);
            pointer-events: none;
        }

        .scoreboard-container {
            background: linear-gradient(135deg, #1a4a2e, #2d5a3d);
            border: 3px solid #fff;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3), inset 0 2px 10px rgba(255,255,255,0.1);
            margin: 20px;
            overflow: hidden;
        }

        .scoreboard-header {
            background: linear-gradient(135deg, #000, #333);
            color: #00ff00;
            padding: 15px;
            text-align: center;
            border-bottom: 3px solid #fff;
            position: relative;
        }

        .scoreboard-title {
            font-size: 28px;
            font-weight: 900;
            text-shadow: 0 0 10px #00ff00, 2px 2px 4px #000;
            letter-spacing: 2px;
        }

        .controls-panel {
            background: linear-gradient(135deg, #1a4a2e, #2d5a3d);
            padding: 20px;
            border-bottom: 2px solid #fff;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .control-group {
            background: rgba(0,0,0,0.3);
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
        }

        .control-label {
            color: #ffff00;
            font-size: 14px;
            font-weight: 700;
            text-shadow: 1px 1px 2px #000;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .control-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #333;
            border-radius: 5px;
            background: linear-gradient(135deg, #000, #222);
            color: #00ff00;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 14px;
            text-shadow: 0 0 5px #00ff00;
        }

        .control-input:focus {
            outline: none;
            border-color: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .refresh-button {
            background: linear-gradient(135deg, #ff6600, #ff8800);
            border: 3px solid #fff;
            border-radius: 8px;
            color: #fff;
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            font-size: 14px;
            padding: 12px;
            cursor: pointer;
            text-shadow: 1px 1px 2px #000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }

        .refresh-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }

        .refresh-button:disabled {
            background: linear-gradient(135deg, #666, #888);
            cursor: not-allowed;
            transform: none;
        }

        .games-header {
            background: rgba(0,0,0,0.4);
            color: #ffff00;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            text-shadow: 1px 1px 2px #000;
        }

        .game-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(0,0,0,0.8));
            border: 2px solid #fff;
            border-radius: 10px;
            margin: 10px 20px;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .game-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            border-color: #00ff00;
        }

        .game-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, rgba(0,0,0,0.3), rgba(255,255,255,0.1), rgba(0,0,0,0.3));
        }

        .matchup {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            text-shadow: 1px 1px 3px #000;
            letter-spacing: 1px;
        }

        .rating-display {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .rating-badge {
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: 900;
            font-size: 16px;
            text-shadow: 1px 1px 2px #000;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            min-width: 60px;
            text-align: center;
        }

        .rating-label {
            font-size: 12px;
            color: #ffff00;
            text-shadow: 1px 1px 2px #000;
            font-weight: 700;
        }

        .show-hide {
            background: rgba(0,0,0,0.5);
            color: #fff;
            padding: 8px 15px;
            border: 2px solid #fff;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-shadow: 1px 1px 2px #000;
        }

        .game-details {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,50,0,0.3));
            padding: 20px;
            border-top: 2px solid #00ff00;
        }

        .final-score {
            font-size: 24px;
            font-weight: 900;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00, 2px 2px 4px #000;
            margin-bottom: 15px;
            text-align: center;
        }

        .ot-badge {
            background: linear-gradient(135deg, #ff6600, #ff8800);
            color: #fff;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 900;
            text-shadow: 1px 1px 2px #000;
            border: 2px solid #fff;
            margin-left: 15px;
        }

        .game-description {
            color: #ccc;
            font-style: italic;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            text-shadow: 1px 1px 2px #000;
        }

        .loading-screen {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,50,0,0.3));
            border: 2px solid #fff;
            border-radius: 10px;
            margin: 20px;
            padding: 60px;
            text-align: center;
        }

        .loading-text {
            color: #00ff00;
            font-size: 20px;
            font-weight: 900;
            text-shadow: 0 0 15px #00ff00, 2px 2px 4px #000;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .legend {
            background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,50,0,0.3));
            border: 2px solid #fff;
            border-radius: 10px;
            margin: 20px;
            padding: 20px;
        }

        .legend-title {
            color: #ffff00;
            font-size: 18px;
            font-weight: 900;
            text-shadow: 1px 1px 3px #000;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .legend-item {
            text-align: center;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            border: 1px solid #333;
        }

        .legend-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 900;
            font-size: 14px;
            text-shadow: 1px 1px 2px #000;
            border: 2px solid #fff;
            margin-bottom: 8px;
            display: inline-block;
        }

        .legend-desc {
            color: #ccc;
            font-size: 12px;
            font-weight: 700;
        }

        .error-message {
            background: linear-gradient(135deg, #660000, #880000);
            border: 2px solid #ff0000;
            border-radius: 8px;
            color: #fff;
            padding: 15px;
            margin: 15px 0;
            font-weight: 700;
            text-shadow: 1px 1px 2px #000;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const GameExcitementTracker = () => {
            const [selectedDate, setSelectedDate] = useState(() => {
                const today = new Date();
                const yesterday = new Date(today);
                yesterday.setDate(today.getDate() - 1);
                return yesterday.toISOString().split('T')[0];
            });
            const [minRating, setMinRating] = useState(0);
            const [showScores, setShowScores] = useState({});
            const [selectedSport, setSelectedSport] = useState('NFL');
            const [games, setGames] = useState([]);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);

            // Function to fetch REAL sports data from ESPN API
            const fetchGameData = async (date, sport) => {
                setLoading(true);
                setError(null);
                
                console.log(`Fetching ${sport} games for ${date}...`);
                
                try {
                    let apiUrl;
                    if (sport === 'NFL') {
                        const dateFormatted = date.replace(/-/g, '');
                        apiUrl = `https://site.web.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard?dates=${dateFormatted}`;
                    } else if (sport === 'NBA') {
                        const dateFormatted = date.replace(/-/g, '');
                        apiUrl = `https://site.web.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard?dates=${dateFormatted}`;
                    }

                    console.log('Fetching from:', apiUrl);
                    const response = await fetch(apiUrl);
                    
                    if (!response.ok) {
                        throw new Error(`API Error: ${response.status}`);
                    }

                    const data = await response.json();
                    console.log('ESPN API Response:', data);
                    
                    if (!data.events || data.events.length === 0) {
                        setError(`No ${sport} games found for ${date}`);
                        setGames([]);
                        return;
                    }

                    const transformedGames = data.events.map((event, index) => {
                        const competition = event.competitions[0];
                        const homeTeam = competition.competitors.find(c => c.homeAway === 'home');
                        const awayTeam = competition.competitors.find(c => c.homeAway === 'away');
                        
                        const homeScore = parseInt(homeTeam?.score || 0);
                        const awayScore = parseInt(awayTeam?.score || 0);
                        const margin = Math.abs(homeScore - awayScore);
                        const isCompleted = competition.status.type.completed;
                        const isOvertime = competition.status.type.name.includes('OT');
                        
                        let excitement = 5.0;
                        if (isCompleted) {
                            if (margin <= 3) excitement = 8.0 + Math.random() * 2;
                            else if (margin <= 7) excitement = 6.5 + Math.random() * 1.5;
                            else if (margin <= 14) excitement = 4.0 + Math.random() * 2.5;
                            else excitement = 1.5 + Math.random() * 3;
                            
                            if (isOvertime) excitement += 1.0;
                            excitement = Math.min(10.0, excitement);
                        } else {
                            excitement = 5.0;
                        }

                        const descriptions = [
                            `${margin <= 3 ? 'Nail-biter finish' : 'Decisive victory'}`,
                            `${isOvertime ? 'Overtime thriller' : margin <= 7 ? 'Close battle' : 'Controlled win'}`,
                            `${margin >= 20 ? 'Dominant performance' : 'Competitive matchup'}`,
                            `${isCompleted ? 'Final score' : 'Game in progress'}`
                        ];

                        return {
                            id: `${sport}-${date}-${index}`,
                            homeTeam: homeTeam?.team.location || 'Home',
                            awayTeam: awayTeam?.team.location || 'Away',
                            excitement: Math.round(excitement * 10) / 10,
                            homeScore: homeScore,
                            awayScore: awayScore,
                            overtime: isOvertime,
                            description: descriptions[Math.floor(Math.random() * descriptions.length)],
                            status: competition.status.type.description
                        };
                    });

                    console.log('Transformed games:', transformedGames);
                    setGames(transformedGames);
                    
                } catch (error) {
                    console.error('Error fetching games:', error);
                    setError(`Failed to load ${sport} games for ${date}. Using sample data.`);
                    generateFallbackData(date, sport);
                } finally {
                    setLoading(false);
                }
            };

            const generateFallbackData = (date, sport) => {
                const dateObj = new Date(date);
                const dayOfWeek = dateObj.getDay();
                
                let sampleGames = [];
                
                if (sport === 'NFL') {
                    if (![0, 1, 4, 6].includes(dayOfWeek)) {
                        setGames([]);
                        return;
                    }
                    
                    const nflMatchups = [
                        ['Kansas City', 'Buffalo'], ['Philadelphia', 'Dallas'], ['San Francisco', 'Seattle'],
                        ['Miami', 'New England'], ['Baltimore', 'Pittsburgh'], ['Green Bay', 'Minnesota']
                    ];
                    
                    sampleGames = nflMatchups.map(([away, home], index) => {
                        const awayScore = Math.floor(Math.random() * 25) + 10;
                        const homeScore = Math.floor(Math.random() * 25) + 10;
                        const margin = Math.abs(awayScore - homeScore);
                        const overtime = Math.random() < 0.1;
                        
                        let excitement = margin <= 3 ? 8.5 : margin <= 7 ? 7.0 : margin <= 14 ? 5.5 : 3.0;
                        if (overtime) excitement += 1.0;
                        excitement = Math.min(10.0, excitement + Math.random() - 0.5);
                        
                        return {
                            id: `fallback-${index}`,
                            homeTeam: home,
                            awayTeam: away,
                            excitement: Math.round(excitement * 10) / 10,
                            homeScore: awayScore,
                            awayScore: homeScore,
                            overtime,
                            description: `Simulated: ${margin <= 3 ? 'Close finish' : 'Solid victory'}`,
                            status: 'Final'
                        };
                    });
                }
                
                setGames(sampleGames);
            };

            useEffect(() => {
                setGames([]);
                setShowScores({});
                setError(null);
                fetchGameData(selectedDate, selectedSport);
            }, [selectedDate, selectedSport]);

            const getRatingColor = (rating) => {
                if (rating >= 8.5) return 'linear-gradient(135deg, #ff0000, #ff3333)';
                if (rating >= 7) return 'linear-gradient(135deg, #ff6600, #ff8800)';
                if (rating >= 6) return 'linear-gradient(135deg, #ffaa00, #ffcc00)';
                if (rating >= 5) return 'linear-gradient(135deg, #0088ff, #00aaff)';
                return 'linear-gradient(135deg, #666666, #888888)';
            };

            const getRatingLabel = (rating) => {
                if (rating >= 8.5) return 'MUST WATCH';
                if (rating >= 7) return 'GREAT';
                if (rating >= 6) return 'GOOD';
                if (rating >= 5) return 'OK';
                return 'SKIP';
            };

            const filteredGames = games.filter(game => game.excitement >= minRating);

            const toggleScore = (gameId) => {
                setShowScores(prev => ({
                    ...prev,
                    [gameId]: !prev[gameId]
                }));
            };

            const formatDate = (dateStr) => {
                const date = new Date(dateStr + 'T00:00:00');
                return date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric' 
                });
            };

            return React.createElement('div', { className: 'field-background' },
                React.createElement('div', { className: 'field-lines' }),
                React.createElement('div', { className: 'scoreboard-container' },
                    // Header
                    React.createElement('div', { className: 'scoreboard-header' },
                        React.createElement('div', { className: 'scoreboard-title' }, 'GAME EXCITEMENT TRACKER'),
                        React.createElement('div', { 
                            style: { 
                                fontSize: '14px', 
                                color: '#ffff00', 
                                marginTop: '8px',
                                textShadow: '1px 1px 2px #000'
                            }
                        }, 'FIND THE BEST GAMES WITHOUT SPOILERS')
                    ),
                    
                    // Controls
                    React.createElement('div', { className: 'controls-panel' },
                        React.createElement('div', { className: 'control-group' },
                            React.createElement('div', { className: 'control-label' }, 'DATE'),
                            React.createElement('input', {
                                type: 'date',
                                value: selectedDate,
                                onChange: (e) => setSelectedDate(e.target.value),
                                className: 'control-input'
                            })
                        ),
                        React.createElement('div', { className: 'control-group' },
                            React.createElement('div', { className: 'control-label' }, 'SPORT'),
                            React.createElement('select', {
                                value: selectedSport,
                                onChange: (e) => setSelectedSport(e.target.value),
                                className: 'control-input'
                            },
                                React.createElement('option', { value: 'NFL' }, 'NFL'),
                                React.createElement('option', { value: 'NBA' }, 'NBA')
                            )
                        ),
                        React.createElement('div', { className: 'control-group' },
                            React.createElement('div', { className: 'control-label' }, `MIN RATING: ${minRating}`),
                            React.createElement('input', {
                                type: 'range',
                                min: '0',
                                max: '10',
                                step: '0.5',
                                value: minRating,
                                onChange: (e) => setMinRating(parseFloat(e.target.value)),
                                className: 'control-input',
                                style: { height: '10px' }
                            })
                        ),
                        React.createElement('div', { className: 'control-group' },
                            React.createElement('div', { className: 'control-label' }, 'ACTIONS'),
                            React.createElement('button', {
                                onClick: () => fetchGameData(selectedDate, selectedSport),
                                disabled: loading,
                                className: 'refresh-button'
                            }, loading ? 'LOADING...' : 'REFRESH')
                        )
                    ),
                    
                    error && React.createElement('div', { className: 'error-message' }, error),
                    
                    // Games Header
                    React.createElement('div', { className: 'games-header' },
                        React.createElement('div', null, `${formatDate(selectedDate).toUpperCase()} - ${selectedSport}`),
                        React.createElement('div', null, `${filteredGames.length} GAMES`)
                    ),
                    
                    // Games List
                    loading ? 
                        React.createElement('div', { className: 'loading-screen' },
                            React.createElement('div', { className: 'loading-text' }, 'LOADING GAMES...')
                        )
                    : filteredGames.length === 0 ?
                        React.createElement('div', { className: 'loading-screen' },
                            React.createElement('div', { className: 'loading-text' }, 'NO GAMES FOUND')
                        )
                    : filteredGames
                        .sort((a, b) => b.excitement - a.excitement)
                        .map((game) =>
                            React.createElement('div', {
                                key: game.id,
                                className: 'game-card',
                                onClick: () => toggleScore(game.id)
                            },
                                React.createElement('div', { className: 'game-header' },
                                    React.createElement('div', { className: 'matchup' }, 
                                        `${game.awayTeam} @ ${game.homeTeam}`
                                    ),
                                    React.createElement('div', { className: 'rating-display' },
                                        React.createElement('div', null,
                                            React.createElement('div', {
                                                className: 'rating-badge',
                                                style: { background: getRatingColor(game.excitement) }
                                            }, `${game.excitement}/10`),
                                            React.createElement('div', { className: 'rating-label' }, 
                                                getRatingLabel(game.excitement)
                                            )
                                        ),
                                        React.createElement('div', { className: 'show-hide' },
                                            showScores[game.id] ? '▼ HIDE' : '▶ SHOW'
                                        )
                                    )
                                ),
                                
                                showScores[game.id] && React.createElement('div', { className: 'game-details' },
                                    React.createElement('div', { className: 'final-score' },
                                        `${game.status}: ${game.awayTeam} ${game.awayScore} - ${game.homeScore} ${game.homeTeam}`,
                                        game.overtime && React.createElement('span', { className: 'ot-badge' }, 'OT')
                                    ),
                                    game.description && React.createElement('div', { className: 'game-description' }, 
                                        game.description
                                    )
                                )
                            )
                        ),
                    
                    // Rating Legend
                    React.createElement('div', { className: 'legend' },
                        React.createElement('div', { className: 'legend-title' }, 'RATING GUIDE'),
                        React.createElement('div', { className: 'legend-grid' },
                            React.createElement('div', { className: 'legend-item' },
                                React.createElement('div', {
                                    className: 'legend-badge',
                                    style: { background: 'linear-gradient(135deg, #ff0000, #ff3333)' }
                                }, '8.5-10'),
                                React.createElement('div', { className: 'legend-desc' }, 'MUST WATCH')
                            ),
                            React.createElement('div', { className: 'legend-item' },
                                React.createElement('div', {
                                    className: 'legend-badge',
                                    style: { background: 'linear-gradient(135deg, #ff6600, #ff8800)' }
                                }, '7.0-8.4'),
                                React.createElement('div', { className: 'legend-desc' }, 'GREAT')
                            ),
                            React.createElement('div', { className: 'legend-item' },
                                React.createElement('div', {
                                    className: 'legend-badge',
                                    style: { background: 'linear-gradient(135deg, #ffaa00, #ffcc00)' }
                                }, '6.0-6.9'),
                                React.createElement('div', { className: 'legend-desc' }, 'GOOD')
                            ),
                            React.createElement('div', { className: 'legend-item' },
                                React.createElement('div', {
                                    className: 'legend-badge',
                                    style: { background: 'linear-gradient(135deg, #0088ff, #00aaff)' }
                                }, '5.0-5.9'),
                                React.createElement('div', { className: 'legend-desc' }, 'OK')
                            ),
                            React.createElement('div', { className: 'legend-item' },
                                React.createElement('div', {
                                    className: 'legend-badge',
                                    style: { background: 'linear-gradient(135deg, #666666, #888888)' }
                                }, '0-4.9'),
                                React.createElement('div', { className: 'legend-desc' }, 'SKIP')
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(GameExcitementTracker), document.getElementById('root'));
    </script>
</body>
</html>
